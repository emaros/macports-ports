# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                gds-root-extensions
version             2.19.4
revision            0

categories          science
platforms           darwin
license             GPL
maintainers         {@emaros ligo.org:ed.maros} openmaintainer

description         LSC Algorithm Library
long_description    LIGO Scientific Collaboration Algorithm Library containing core \
                    routines for gravitational wave data analysis.

homepage            https://git.ligo.org/gds/gds
master_sites        https://software.ligo.org/lscsoft/source/

checksums           rmd160  be4c4d14992123904889ab4091bf266d8ff07bd1 \
                    sha256  275c43b5e6ad61357e1a1053210fe05522cfae0fa77213fa72a13ae3948b0995 \
                    size    571226

depends_build-append \
                    port:pkgconfig \
                    port:autoconf \
                    port:automake

depends_lib-append  port:gds

configure.args-append \
                    --enable-dtt \
                    --enable-online \
                    --enable-root-objects

#------------------------------------------------------------------------
# Use root 6 for High Sierra and beyond, else root 5
#------------------------------------------------------------------------
if {${os.platform} eq "darwin" && ${os.major} >= 17 } {
    compiler.cxx_standard   2014

    depends_lib-append      port:root6
} else {
    compiler.cxx_standard   2011

    depends_lib-append      port:root5
}

livecheck.type   regex
livecheck.url    ${master_sites}
livecheck.regex  {gds-root-extensions-(\d+(?:\.\d+)*).tar.gz}
