# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                gds-dmt
version             2.19.6
revision            0

categories          science
platforms           darwin
license             GPL
maintainers         {@emaros ligo.org:ed.maros} openmaintainer

description         LSC Algorithm Library
long_description    LIGO Scientific Collaboration Algorithm Library containing core \
                    routines for gravitational wave data analysis.

homepage            https://git.ligo.org/gds/gds
master_sites        https://software.igwn.org/lscsoft/source/

checksums           rmd160  6f0521ed07efa028db92a48d0da4edf09ab05c9d \
                    sha256  6c529043c8bd5b4dbf3513718fb7cd3f3d209234e91fe583c2d17b36cb04a197 \
                    size    663495

depends_build-append \
                    port:autoconf \
                    port:automake \
                    port:pkgconfig

depends_lib-append  port:gds

configure.args  --enable-dtt \
                --enable-python \
                --enable-root-objects

#------------------------------------------------------------------------
# Use root 6, C++ 2014 for High Sierra and beyond, else root 5, C++ 2011
#------------------------------------------------------------------------
if {${os.platform} eq "darwin" && ${os.major} >= 17 } {
    compiler.cxx_standard   2014

    depends_lib-append      port:root6
} else {
    compiler.cxx_standard   2011

    depends_lib-append      port:root5
}

livecheck.type   regex
livecheck.url    ${master_sites}
livecheck.regex  {gds-dmt-(\d+(?:\.\d+)*).tar.gz}
